<section id="filterable-content"></section>

<script type="text/babel">
// load in JSON data from file

// Master Component

var MovieList = React.createClass({
	getDefaultProps: function() {
	    return {
	      value: 'default value'
	    };
  },
  componentDidMount: function(){
  		var data;
		var oReq = new XMLHttpRequest();
		oReq.onload = loadData;
		oReq.open("get", "../src/js/data/data.json", true);
		oReq.send();
		// right, should be able to do some stuff now.
		function loadData(e) {
		    data = JSON.parse(this.responseText);
		    console.log(data);
		    var list = document.getElementById('list');
		    
		    var i = 0;
			for (i = 0; i < data.media.length; i++) {
				var obj = data.media[i];

				list.innerHTML += '<li><img src="' + obj.poster +'"><br><p>'+ obj.title +'</p><br><p>Genre: '+ obj.genre +'</p></li>';
			}

		}

  }, 
   
  render: function() {
  	console.log(this.props.value);
	return (
      <div>
      		<div>
      			<div className="filter">
        			<DropDownFilters />
        		</div>
        		<Movie />
     		</div>
     </div>
    );
  }
});


// Dropdown Filters (pass in components you're rendering for the GenreList, YearList and SearchBox. Also ClearFilter, but may break that out. We'll see. )

var DropDownFilters = React.createClass({

	render: function(){
		//console.log(this.props.value);
		return (
			<div>
				<GenreList />
				<YearList />
				<SearchBox />
				<ClearFilter />
			</div>
		);
	}
});

// Render the component for the dropdown list
// TO DO: Dynamically populate the options list and output

var GenreList = React.createClass({
	
	render: function(){
		return(
			<div className="fl-lt">
				<select id="Genre">
				</select>
				<div></div>
			</div>
		)
	}
});

// Render the component for the Year dropdown list
// TO DO: Dynamically populate the options list and output

var YearList = React.createClass({
	render: function(){
		return(
		<div className="fl-lt">
			<select id="Year">
				<option value="{this.props.value}">{this.props.value}</option>
				
			</select>
			<div></div>
		</div>
		)
	}
});

// Component to render the search box field

var SearchBox = React.createClass({
	render: function() {
    return (
      <div>
		<input type="text" className="search" placeholder="Search" />
	</div>
    );
  }
});

// Component to render the clear filters field

var ClearFilter = React.createClass({
	render: function(){
		return(
			<div>
				<div className="mvis">
					<input type="checkbox" data-sort="type" />
					<label>Movies</label>
				</div>
				<div className="books">
					<input type="checkbox" data-sort="type" />
					<label>Books</label>
				</div>
				<div className="clear-filter">
					<a href="#" id="clear-filter">Clear filters</a>
				</div>
			</div>
		)
	}
});

// Right, on to the actual element. So we're going to render the movies into the ul and then once there's some output we'll hook it up. 

var Movie = React.createClass({

	render: function(){
		return(
		<div>
			<div id="movies">
				<div>
					<ul id="list"></ul>
				</div>
			</div> 
		</div>
		)
	}
});


// Render the MovieList Component to the filterable-content section

ReactDOM.render(
    <MovieList />,
    document.getElementById('filterable-content')
 );

</script>